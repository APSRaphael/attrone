<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>易简医-长护险用户</title>
		<link href="../css/bootstrap-reset.css" rel="stylesheet" />
		<link href="../css/bootstrap.min.css" rel="stylesheet" />
		<link href="../css/style.css" rel="stylesheet" />
		<link href="../js/plugins/pagination/pagination.css" rel="stylesheet" />
		<link href="../css/r-panel.css" rel="stylesheet" />
		<link href="../fonts/css/font-awesome.css" />
		<link href="../js/plugins/jquery-toast-plugin/jquery.toast.min.css" rel="stylesheet" />
		<link href="../js/bootstrap-editable/bootstrap-editable.css"  rel="stylesheet" />
		<link  href="../css/app.css" rel="stylesheet" />
	</head>
	<body style="background-color: white;">
		<div class="container-fluid">
			<div class="panel-body">
				<div class="row m-bot15 " style="color: #000; padding: 10px;">
					<form class="form-inline" role="form">
						<div class="row">
						<div class="col-lg-12 form-group">
				        <input type="text" class="form-control input-sm" id=q_idcard placeholder="输入身份证号" style="width: 200px;height:30px;" autofocus>
				        <button type="button" class="btn btn-primary btn-sm js-btn-showapplyListbyif" id="searchBut">
							<i class="fa fa-search"></i>&nbsp;&nbsp;查询
						</button>
						</div>
						</div>
				    </form>
				</div>
				
				<!-- 个人资料start -->
				<div class="row m-bot15 js-userInfo-contain">
					<table class="table table-striped table-bordered table-hover dataTable no-footer" role="grid" style="margin:0px !important;">
						
						<tbody id="InsureDetailContent">
								<tr>
									<td colspan="14" class="text-center">
										数据载入中...
									</td>
								</tr>
							</tbody>
				        </tbody>
					</table>
				</div>
				<!-- 个人资料end -->
				
				<!-- 长护险资料Start -->
				<div class="row js-userInfo-contain" style="margin-top:15px;">
					<div class="tabbable-custom ">
						<ul class="nav nav-tabs" id="kinsfolk-name-nav">
							<li class="js-kinsfolk-nav-item active"><a href="#insure_tab_1" data-toggle="tab"><b>长护险申请记录</b></a></li>
							<li class="js-kinsfolk-nav-item"><a href="#insure_tab_2" data-toggle="tab"><b>评估记录</b></a></li>
							<li class="js-kinsfolk-nav-item"><a href="#insure_tab_4" data-toggle="tab"><b>长护险服务记录</b></a></li>
							<li class="js-kinsfolk-nav-item"><a href="#insure_tab_5" data-toggle="tab"><b>长护险补贴款记录</b></a></li>
							
						</ul>
					<div class="tab-content" id="kinsfolk-detail-content">
						<div class="tab-pane active" id="insure_tab_1">
							<table
								class="table table-striped table-bordered table-hover dataTable no-footer"
								role="grid" style="margin:0px !important;">
						<!-- id=InsureapplyContent -->
								<thead>
									<tr>
										<th>申请编号</th>
										<th>申请时间</th>
										<th>申请账号</th>
										<th>申请状态</th>
										<th>关联订单</th>
									</tr>
								</thead>
								<tbody id="InsureapplyContent">
									<tr>
										<td colspan="14" class="text-center">
											数据载入中...
										</td>
									</tr>
							</tbody>
							</table>
						</div>
						<div class="tab-pane" id="insure_tab_2">
							<table
								class="table table-striped table-bordered table-hover dataTable no-footer"
								role="grid" style="margin:0px !important;">
								<thead>
									<tr>
										<th>评估内容</th>
										<th>评估得分</th>
										<th>评估类型</th>
										<th>评估人</th>
										<th>评估时间</th>
									</tr>
								</thead>

								<tbody id="InsureAssessContent">
									<tr>
										<td colspan="14" class="text-center">
											数据载入中...
										</td>
									</tr>
								</tbody>
							</table>
						</div>

						<div class="tab-pane" id="insure_tab_4">
							<table
								class="table table-striped table-bordered table-hover dataTable no-footer"
								role="grid" style="margin:0px !important;">
								<thead>
									<tr>
										<th>创建时间</th>
										<th>订单编号</th>
										<th>地址</th>
										<th>消费项目</th>
										<th>消费金额</th>
										<th>已付金额</th>
										<th>补贴金额</th>
										<th>护工</th>
										<th>健康经理</th>
										<th>状态</th>
									</tr>
								</thead>
								<tbody id="InsureserveContent">
									<tr>
										<td colspan="14" class="text-center">
											数据载入中...
										</td>
									</tr>
								</tbody>
							</table>
						</div>

						<div class="tab-pane" id="insure_tab_5">
							<table
								class="table table-striped table-bordered table-hover dataTable no-footer"
								role="grid" style="margin:0px !important;">
								<thead>
									<tr>
										<th>操作时间</th>
										<th>订单编号</th>
										<th>类型</th>
										<th>操作</th>
										<th>金额</th>
										<th>操作后余额</th>
										<th>操作人</th>
										<th>备注</th>
									</tr>
								</thead>
								<tbody id="InsuresubsidyContent">
									<tr>
										<td colspan="14" class="text-center">
											数据载入中...
										</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
				</div>
				</div>
			</div>
		</div>
		<!-- 长护险End -->
		
		

		<script type="text/html" id="InsureDetailTemplate">
			<tr>
				<td>
					<span style="width:100px;font-size:20px;"><strong>姓名:{{insure.kinsName}}</strong></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					<span style="width:100px;font-size:20px;"><strong>身份证号:{{insure.idcard}}</strong></span><br /><br />
					{{if insure.startTime == null && insure.endTime == null}}
					<span>长护险资质日期:暂无</span><br/><br />
					{{else}}
					<span>长护险资质日期:{{insure.startTime}}至{{insure.endTime}}</span><br/><br />
					{{/if}}
					{{if insure.orderId == null}}
					<span>服务中的订单:0单</span><br /><br />
					{{else}}
					<span>服务中的订单:{{insure.orderId.length}}单</span><br /><br />
					{{/if}}
					<span>补贴款账户:{{insure.accountStr}}元</span>
				</td>
				<td>
					<span style="padding:50px">性别:{{insure.sexStr}}</span>
					<span style="padding:50px">年龄:{{insure.age}}</span>
					<span style="padding:50px">就诊卡号:{{insure.medicareNO}}</span>
					<span style="padding:50px">医保类型:{{insure.medicareType}}</span>
					<span style="padding:50px">医保号:{{insure.healthCareNO}}</span><br /><br />
					<span style="padding:50px">身高:{{insure.height}}</span>
					<span style="padding:28px">体重:{{insure.weight}}</span>
					<span style="padding:60px">语言:{{insure.language}}</span><br /><br />
					<span style="padding:50px">备注:{{insure.memoInfo}}</span><br /><br />
					<span style="padding:50px">病史描述:
							{{each insure.medicalList as item i}}
								{{item}}&nbsp;&nbsp;
							{{/each}}
					</span>
				</td>
			</tr>
		</script>
		<!--长护险申请记录-->
		<script type="text/html" id="InsureapplyTemplate">
			{{each applyList as item i}}
				<tr>
					<td><span><a href="javascript:void(0);"  class="js-btn-showInsureHandlePanel" insureNO="{{item.insureNO}}" >{{item.insureNO}}</a></span><br /></td>
					<td>{{item.createTime}}</td>
					<td>{{item.contactPhone}}</td>
					<td>{{item.statusStr}}</td>
					{{if item.orderId == null}}
					<td>无</td>
					{{else}}
					<td>
					{{each item.orderId as orders i}}
					<a href="javascript:void(0);" link="templates/orderDetail.html?orderId={{orders}}" class="js-addTab-link" title="订单详情">{{orders}}</a>
					{{/each}}
					</td>
					{{/if}}

				</tr>
			{{/each}}
		</script>
		
		<!--长护险评估记录-->
		<script type="text/html" id="InsureADLMMSETemplate">

			{{each assessList as item i}}
			    <tr>
					{{if item.judge != 0}}
					<td><a href="javascript:void(0);" typeGrade=2 id="{{item.id}}" assessType="{{item.assessType}}" insureNO="{{item.insureNO}}" class="js-lookMMSETab-link" title="MMSE评估">MMSE评估</a></td>
					{{else}}
					<td>
						<a href="javascript:void(0);" typeGrade=1 id="{{item.id}}" assessType="{{item.assessType}}" insureNO="{{item.insureNO}}" class="js-lookADLTab-link" title="ADL评估">ADL评估</a>
						&nbsp;&nbsp;
					{{/if}}
					<td>{{item.score}}</td>
					{{if item.assessType == 0}}
					<td>用户自评</td>
					{{else if item.assessType == 1}}
					<td>客服评估</td>
					{{else if item.assessType == 2}}
					<td>护士评估</td>
					{{/if}}
					<td>{{item.createStaffName}}</td>
					<td>{{item.createTime}}</td>
				</tr>
			{{/each}}
		</script>
	
		
		<!--长护险服务记录 -->
		<script type="text/html" id="InsureserveTemplate">
				{{each insureOrderList as item i}}
				<tr>
					<td>{{item.createTime}}</td>
					<td><a href="javascript:void(0);" link="templates/orderDetail.html?orderId={{item.orderId}}" class="js-addTab-link" title="订单详情">{{item.orderId}}</a><br /></td>
					<td>{{item.province}}{{item.city}}{{item.district}}{{item.building}}{{item.addrDetail}}</td>
					<td>{{item.serviceItem}}</td>
					<td>{{item.feeStr}}</td>
					<td>{{item.realFeeStr}}</td>
					<td>{{item.totalaccountStr}}</td>
					<td>{{item.hgName}}</td>
					<td>{{item.managerName}}</td>
					<td>{{item.statusStr}}</td>
				</tr>
				{{/each}}
		</script>
		
		<!--长护险补贴记录 -->
		<script type="text/html" id="InsuresubsidyTemplate">
				{{each accountRecordList as item i}}
				<tr>
					<td>{{item.createTime}}</td>
					<td><a href="javascript:void(0);" link="templates/orderDetail.html?orderId={{item.orderId}}" class="js-addTab-link" title="查看详情">{{item.orderId}}</a><br /></td>
					<td>{{item.changeTypeStr}}</td>
					<td>{{item.changeAccount}}</td>
					<td>{{item.accountStr}}</td>
					<td>{{item.changeAccountStr}}</td>
					<td>{{item.createStaffName}}</td>
					<td>{{item.changeDesc}}</td>
				</tr>
				{{/each}}
		</script>
		<script type="text/javascript" src="../js/plugins/jquery.min.js"></script>
		<script type="text/javascript" src="../js/plugins/bootstrap.min.js"></script>
		<script type="text/javascript" src="../js/app/common/toast.js"></script>
		<script type="text/javascript" src="../js/app/common/httpUtil.js"></script>
		<script type="text/javascript" src="../js/plugins/template.js"></script>
		<script type="text/javascript" src="../js/plugins/pagination/jquery.pagination.js"></script>
		<script type="text/javascript" src="../js/app/common/modalUtil.js"></script>
		<script type="text/javascript" defer async="true" src="https://webapi.amap.com/maps?v=1.3&key=76995f30ba8965c259c624c3a3fa5777"></script>
		<script type="text/javascript" src="../js/plugins/bootbox.js-4.4.0.js"></script>
		<script type="text/javascript" src="../js/plugins/jquery-toast-plugin/jquery.toast.min.js"></script>
		<script type="text/javascript" src="../js/bootstrap-editable/bootstrap-editable.min.js"></script>
		<script type="text/javascript" src="../js/app/insure_user_info.js"></script>
 		<script type="text/javascript" src="../js/app/insure.js"></script>
		<script type="text/javascript" src="../js/app/fun.js"></script>
		<script type="text/javascript" src="../js/app/common/tools.js"></script>
		<script type="text/javascript">
		$(document).ready(function() {
			var httpUtilObj = new HttpUtil();
			
			
			//初始化用户信息
			var initInsureUserInfo = function(idCard) {
				
			}
			//长护险申请信息
			var initInsureApplyecord = function(idCard) {
				
			}
			//长护险联系记录
			var initInsureConcatRecord = function(idCard) {
				
			}
			//长护险服务记录
			var initInsureServiceRecord = function(idCard) {
				
			}
			//长护险补贴款记录
			var initInsuresubsidyRecord = function(idCard) {
				
			}
			
			
			
			var showAllInfo = function(idCard) {
				//初始化用户信息
				initInsureUserInfo(idCard);

				//长护险申请信息
				initInsureApplyecord(idCard);
				
				//长护险联系记录
				initInsureConcatRecord(idCard);
				
				//长护险服务记录
				initInsureServiceRecord(idCard);
				
				//长护险补贴款记录
				initInsuresubsidyRecord(idCard);

			};
			
			var getIdCard = function(){
				var initParam = httpUtilObj.getTabParams();
				console.log("initParam"+initParam);
				var idcard = initParam.idcard;
				var idcardInput = $("#q_idcard").val();
				var notInput = idcardInput == undefined || idcardInput == '';
				var notDefined = idcard == undefined || idcard == '';
				if(notInput && notDefined) {
					return;
				}
				if(notInput) {
					$("#q_idcard").val(idcard);
					idcardInput = idcard;
				}
				
				return idcardInput;
			}
			var showInsureUserInfo = function(){
				var idCard = getIdCard(idCard);
				showAllInfo(idCard);
			}
			$('#q_idcard').keydown(function(e) {
				if(e.keyCode == 13) {
					var keyword = $("#q_idcard").val();
					showInsureUserInfo();
					e.stopPropagation();
					return false;
				}
			});
			$("#searchBut").click(function() {
				showInsureUserInfo();
			});
			showInsureUserInfo();
			
		});
		</script>
	</body>

</html>	