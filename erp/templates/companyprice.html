<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>易简医</title>
		<link href="../css/bootstrap-reset.css" rel="stylesheet" />
		<link href="../css/bootstrap.min.css" rel="stylesheet" />
		<link href="../css/style.css" rel="stylesheet" />
		<link href="../js/plugins/pagination/pagination.css" rel="stylesheet" />
		<link href="../css/r-panel.css" rel="stylesheet" />
		<link href="../fonts/css/font-awesome.css" />
		<link href="../js/plugins/jquery-toast-plugin/jquery.toast.min.css" rel="stylesheet" />
		<link  href="../css/app.css"/>
	</head>

	<body style="background-color: white;">
		<div class="container-fluid">
			<div class="panel-body">
				<div class="row">
					<form class="form-inline" role="form">
						<div class="row">
							<div class="m-bot15 col-lg-12 form-group">
								<button type="button" class="btn btn-success btn-sm m-bot15" id="orgPriceDeal" onclick="priceModule.addPriceItem()"><i class="fa fa-plus"></i>&nbsp;&nbsp;新增定价</button>
								<button type="button" class="btn btn-success btn-sm m-bot15" id="orgPriceDeal" onclick="priceModule.showPrepayList()">居家预付金</button>
								<label class="form-label  m-bot15">&nbsp;&nbsp;服务类型：</label>
								 <select class="form-control m-bot15" style="width: 150px;height: 33px;" id="select_priceStatus">
									<option value="-1">全部</option>
								</select>
								<button type="button" class="btn btn-primary btn-sm m-bot15 js-btn-showComPanyPriceList" id="comPanyPriceBut" >
                        			<i class="fa fa-search"></i>&nbsp;&nbsp;查询
                       			</button>
							</div>
						</div>
					</form>
				</div>
				<div class="row">
					<!-- search form end-->
					<div class="adv-table">
						<table class="display table table-bordered table-striped" id="dynamic-table">
							<thead>
								<tr>
									<th>服务类型</th>
									<th>服务名称</th>
									<th>服务价格</th>
									<th>服务单位</th>
									<th>默认状态</th>
									<th>长护险</th>
									<th>操作</th>
								</tr>
							</thead>
							<tbody id="priceListContent">
								<tr>
									<td colspan="6" class="text-center">
										数据载入中...
									</td>
								</tr>
							</tbody>
						</table>
						<ul class="pagination" id="pagination"></ul>
					</div>
				</div>
			</div>
		</div>
		
		<div id="showPrepayList_panel" class="r_panel">
			<div class="panel-header">
				<button type="button" class="close rp_close" data-dismiss="modal" aria-label="Close">
		            	<span aria-hidden="true">&times;</span>
	            </button>
				<h4 id="descHFour">居家预付金</h4>
				<br />
			</div>
			<div class="panel-body">
				<div class="container-fluid">
					<div class="row">
						<div class="col-lg-12">
							<form class="form-inline" role="form">
								<div class="adv-table">
									<table class="display table table-bordered table-striped" id="dynamic-table">
										<thead>
											<tr>
												<th>服务类型</th>
												<th>预付金</th>
												<th>操作</th>
											</tr>
										</thead>
										<tbody id="prepayListContent">
											<tr>
												<td colspan='3'>
													暂无数据...
												</td>
											</tr>
										</tbody>
									</table>
									<div class="modal-footer">
										<button type="button" class="btn btn-success js-btn-ok hidden" id="batchUpdate" onclick="priceModule.batchUpdatePriceItem()">批量保存</button>
									</div>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
		
		<div id="addPriceItem_panel" class="r_panel">
	        <div class="panel-header">
	            <button type="button" class="close rp_close" data-dismiss="modal" aria-label="Close">
	            	<span aria-hidden="true">&times;</span>
	            </button>
	            <h4 id="desc4Add" class="modal-title">新增服务</h4>
	        </div>
	        <div class="panel-body">
	            <div class="container-fluid">
	                <form class="form-horizontal" role="form" name="showOrgForm">
	                    <input type="hidden" name="id" id="showCompanyInfo_id"/>
	                    
	                     <div class="form-group">
	                    	<label class="col-sm-4 control-label">服务名称 *</label>
	                        <div class="col-sm-4">
                                <input type="text" class="form-control" placeholder="定价名称" 
                                	id="addPriceItem_serviceItem">
	                        </div>
	                    </div>
	                    
						<div class="form-group row hidden">
	                    	<label class="col-sm-4 control-label">服务类型 *</label>
	                        <div class="col-sm-5" id="serviceState">
                            	<select disabled="disabled" class="form-control m-bot15" style="width: 150px;height: inherit;" id="addPriceItem_parentTypeSel" onchange="priceModule.typeSelChange('addPriceItem_')">
									<option value="2" selected>居家服务</option>
								</select>
	                        </div>
	                    </div>
						<div class="form-group row">
	                    	<label class="col-sm-4 control-label">服务类型 *</label>
	                        <div class="col-sm-7" id="serviceState">
                            	<select class="form-control m-bot15" style="width: 150px;height: inherit;" id="addPriceItem_serviceType">
									<option value="">服务类型</option>
								</select>
	                        </div>
	                    </div>
	                    
	                     <div class="form-group" id = "add_radio_longTermInsurance_div" style="display: none;">
	                    	<label class="col-sm-4 control-label">长护险 *</label>
	                        <div class="col-sm-7" id="isAllState">
	                        	<label class="radio-inline">
	                                <input type="radio" id="addPriceItem_lti_0" name="addPriceItem_lti" value="1" >是
	                            </label>
	                            <label class="radio-inline">
	                                <input type="radio" id="addPriceItem_lti_1" name="addPriceItem_lti" value="2" checked="checked">否
	                            </label>
	                        </div>
	                    </div>
	                      <div class="form-group" id = "add_radio_isrequired_div" style="display: none;">
	                    	<label class="col-sm-4 control-label">是否必选 *</label>
	                        <div class="col-sm-7" id="isAllState">
	                        	<label class="radio-inline">
	                                <input type="radio" id="addisrequired_lti_0" name="addisrequired_lti" value="2" >是
	                            </label>
	                            <label class="radio-inline">
	                                <input type="radio" id="addisrequired_lti_1" name="addisrequired_lti" value="1" checked="checked">否
	                            </label>
	                        </div>
	                    </div>
	                     <div class="form-group">
	                    	<label class="col-sm-4 control-label">服务默认状态 *</label>
	                        <div class="col-sm-7" id="add-defaultStatus">
	                        	<label class="radio-inline">
	                                <input type="radio" id="addPriceItem_defaultStatus_0" name="addPriceItem_defaultStatus" value="0" checked>非默认
	                            </label>
	                            <label class="radio-inline">
	                                <input type="radio" id="addPriceItem_defaultStatus_1" name="addPriceItem_defaultStatus" value="1" >默认
	                            </label>
	                        </div>
	                    </div>
	                    
	                     <div class="form-group">
	                    	<label class="col-sm-4 control-label">服务计费方式 *</label>
	                        <div class="col-sm-7" id="isAllState">
	                        	<label class="radio-inline">
	                                <input type="radio" id="addPriceItem_serviceUnit_0" name="addPriceItem_serviceUnit" value="1" >次
	                            </label>
	                            <label class="radio-inline">
	                                <input type="radio" id="addPriceItem_serviceUnit_2" name="addPriceItem_serviceUnit" value="3" checked>天
	                            </label>
	                            <label class="radio-inline">
	                                <input type="radio" id="addPriceItem_serviceUnit_3" name="addPriceItem_serviceUnit" value="4" >月
	                            </label>
	                        </div>
	                    </div>
	                    <div class="form-group">
	                    	<label class="col-sm-4 control-label">展示终端 *</label>
	                        <div class="col-sm-7" id="add_showScope">
	                        	<label class="radio-inline">
	                                <input type="radio" id="addPriceItem_showScope_0" name="addPriceItem_showScope" value="0" checked>全部
	                            </label>
	                        	<label class="radio-inline">
	                                <input type="radio" id="addPriceItem_showScope_1" name="addPriceItem_showScope" value="1" >用户端
	                            </label>
	                            <label class="radio-inline">
	                                <input type="radio" id="addPriceItem_showScope_2" name="addPriceItem_showScope" value="2" >企业端
	                            </label>
	                        </div>
	                    </div>
                        <div class="form-group">
	                    	<label class="col-sm-4 control-label">定价(元) *</label>
	                        <div class="col-sm-5">
                                <input type="text" class="form-control" name="addPriceItem_price" placeholder="服务定价金额" 
                                	id="addPriceItem_price">
	                        </div>
	                    </div>
	                    
	                    <div class="form-group" id = "hgRebatePricePrice">
	                    	<label class="col-sm-4 control-label">职工优惠定价(元) *</label>
	                        <div class="col-sm-5">
                                <input type="text" class="form-control" name="addPriceItem_hgRebatePricePrice" placeholder="职工优惠价定价金额" 
                                	id="addPriceItem_hgRebatePricePrice">
	                        </div>
	                    </div>
	                    <div class="form-group" id = "hgKinsRebatePricePrice">
	                    	<label class="col-sm-4 control-label">职工家属优惠定价(元) *</label>
	                        <div class="col-sm-5">
                                <input type="text" class="form-control" name="addPriceItem_hgKinsRebatePricePrice" placeholder="职工家属优惠价定价金额" 
                                	id="addPriceItem_hgKinsRebatePricePrice">
	                        </div>
	                    </div>
	                    <div class="form-group" id = "consent">
	                    	<label class="col-sm-4 control-label">知情同意书内容 *</label>
	                        <div class="col-sm-5">
                                <textarea class="form-control" name="addPriceItem_consent" placeholder="请输入知情同意书内容" 
                                	id="addPriceItem_consent" style="width: 350px;height: 300px;"></textarea>
	                        </div>
	                    </div>
						
	                    <div class="form-group">
	                        <div class="col-sm-8" style="text-align:right;">
	                        	<!--<button type="button" class="btn btn-success" 
		                        	id="toEditBtn" onclick="COModule.editCO()">编辑</button>-->
		                        <button type="button" class="btn btn-default rp_close">取消</button>
	                        	<button type="button" class="btn btn-success" 
		                        	id="updateCOBtn" onclick="priceModule.savePriceItem()">保存</button>
	                        	<!--<button type="button" class="btn btn-default hidden" 
		                        	id="cancelEditBtn" onclick="COModule.cancelEdit()">取消</button>-->
                        	</div>
	                    </div>
		                </form>
		            </div>
		        </div>
		    </div>		
	    <div id="showPriceItem_panel" class="r_panel">
	        <div class="panel-header">
	            <button type="button" class="close rp_close" data-dismiss="modal" aria-label="Close">
	            	<span aria-hidden="true">&times;</span>
	            </button>
	            <h4 class="modal-title">定价详情</h4>
	        </div>
	        <div class="panel-body">
	            <div class="container-fluid">
	                <form class="form-horizontal" role="form" name="showOrgForm">
	                    
	                     <div class="form-group">
	                    	<label class="col-sm-4 control-label">定价名称 *</label>
	                        <div class="col-sm-5">
                                <input type="text" disabled="disabled" class="form-control" placeholder="定价名称" 
                                	id="showPriceItem_serviceItem">
	                        </div>
	                    </div>
	                    
						<div class="form-group row hidden">
	                    	<label class="col-sm-4 control-label">服务类型 *</label>
	                        <div class="col-sm-7" id="serviceState">
                            	<select disabled="disabled" class="form-control m-bot15" style="width: 150px;" id="showPriceItem_parentTypeSel" onchange="priceModule.typeSelChange('showPriceItem_')">
									<option value="1">机构服务</option>
									<option value="2">居家服务</option>
								</select>
	                        </div>
	                    </div>
						<div class="form-group row">
	                    	<label class="col-sm-4 control-label">详细类型 *</label>
	                        <div class="col-sm-7" id="serviceState">
                            	<select disabled="disabled" class="form-control m-bot15" style="width: 150px;height: inherit;" id="showPriceItem_serviceType">
									<option value="">服务类型</option>
								</select>
	                        </div>
	                    </div>
	                    
	                    <div class="form-group" id = "radio_longTermInsurance_div" style="display: none;">
	                    	<label class="col-sm-4 control-label">长护险 *</label>
	                        <div class="col-sm-7" id="show_lti_div">
	                        	<label class="radio-inline">
	                                <input type="radio" disabled="disabled" id="showPriceItem_lti_0" name="showPriceItem_lti" value="1" >是
	                            </label>
	                            <label class="radio-inline">
	                                <input type="radio" disabled="disabled" id="showPriceItem_lti_1" name="showPriceItem_lti" value="2" >否
	                            </label>
	                        </div>
	                    </div>
	                     <div class="form-group" id = "radio_isrequired_div" style="display: none;" >
	                    	<label class="col-sm-4 control-label">是否必选 *</label>
	                        <div class="col-sm-7" id="radioIsrequiredDiv">
	                        	<label class="radio-inline">
	                                <input disabled="disabled" type="radio" id="updateisrequired_lti_0" name="updateisrequired_lti" value="2" >是
	                            </label>
	                            <label class="radio-inline">
	                                <input disabled="disabled" type="radio" id="updateisrequired_lti_1" name="updateisrequired_lti" value="1" checked="checked">否
	                            </label>
	                        </div>
	                     </div>
	                      <div class="form-group">
	                    	<label class="col-sm-4 control-label">服务默认状态 *</label>
	                        <div class="col-sm-7" id="show-defaultStatus">
	                        	<label class="radio-inline">
	                                <input type="radio" id="showPriceItem_defaultStatus_0" name="showPriceItem_defaultStatus" value="0" checked>非默认
	                            </label>
	                            <label class="radio-inline">
	                                <input type="radio" id="showPriceItem_defaultStatus_1" name="showPriceItem_defaultStatus" value="1" >默认
	                            </label>
	                        </div>
	                    </div>
	                    
	                     <div class="form-group">
	                    	<label class="col-sm-4 control-label">服务计费方式 *</label>
	                        <div id="radioDiv" class="col-sm-7">
	                        	<label class="radio-inline">
	                                <input disabled="disabled" type="radio" id="showPriceItem_serviceUnit_0" name="showPriceItem_serviceUnit" value="1" checked>次
	                            </label>
	                            <label class="radio-inline">
	                                <input disabled="disabled"  type="radio" id="showPriceItem_serviceUnit_2" name="showPriceItem_serviceUnit" value="3" >天
	                            </label>
	                            <label class="radio-inline">
	                                <input disabled="disabled"  type="radio" id="showPriceItem_serviceUnit_3" name="showPriceItem_serviceUnit" value="4" >月
	                            </label>
	                        </div>
	                    </div>
	                    <div class="form-group">
	                    	<label class="col-sm-4 control-label">展示终端 *</label>
	                        <div class="col-sm-7" id="showScope">
	                        	<label class="radio-inline">
	                                <input type="radio" id="showPriceItem_showScope_0" name="showPriceItem_showScope" value="0" checked>全部
	                            </label>
	                        	<label class="radio-inline">
	                                <input type="radio" id="showPriceItem_showScope_1" name="showPriceItem_showScope" value="1" >用户端
	                            </label>
	                            <label class="radio-inline">
	                                <input type="radio" id="showPriceItem_showScope_2" name="showPriceItem_showScope" value="2" >企业端
	                            </label>
	                        </div>
	                    </div>
	                    <div class="form-group">
	                    	<label class="col-sm-4 control-label">定价(元) *</label>
	                       <div class="col-sm-5">
                                <input type="text" class="form-control" name="addPriceItem_price" placeholder="服务定价金额" 
                                	id="showPriceItem_price">
	                        </div>
	                    </div>
	                    
	                    <div class="form-group" id = "show_hgRebatePricePrice">
	                    	<label class="col-sm-4 control-label">职工优惠定价(元) *</label>
	                        <div class="col-sm-5">
                                <input type="text" disabled="disabled" class="form-control" name="showPriceItem_hgRebatePricePrice" placeholder="职工优惠价定价金额" 
                                	id="showPriceItem_hgRebatePricePrice">
	                        </div>
	                    </div>
	                    <div class="form-group" id = "show_hgKinsRebatePricePrice">
	                    	<label class="col-sm-4 control-label">职工家属优惠定价(元) *</label>
	                        <div class="col-sm-5">
                                <input type="text" disabled="disabled" class="form-control" name="showPriceItem_hgKinsRebatePricePrice" placeholder="职工家属优惠价定价金额" 
                                	id="showPriceItem_hgKinsRebatePricePrice">
	                        </div>
	                    </div>
	                    <div class="form-group" id = "show_consent">
	                    	<label class="col-sm-4 control-label">知情同意书内容 *</label>
	                        <div class="col-sm-5">
                                <textarea disabled="disabled" class="form-control" name="showPriceItem_consent" placeholder="请输入知情同意书内容" 
                                	id="showPriceItem_consent" style="width: 350px;height: 300px;"></textarea>
	                        </div>
	                    </div>
	                    
						<input type="hidden" class="form-control" id="priceId">
	                    <div class="form-group">
	                        <div class="col-sm-8" style="text-align:right;">
	                        	<button type="button" class="btn btn-success" 
		                        	id="toEditBtn" onclick="priceModule.editPriceItem()">编辑</button>
	                        	<button type="button" class="btn btn-default hidden" 
		                        	id="cancelEditBtn" onclick="priceModule.cancelEdit()">取消</button>
	                        	<button type="button" class="btn btn-success hidden" 
		                        	id="updatePriceBtn" onclick="priceModule.updatePriceItem()">保存</button>
                        	</div>
	                    </div>
		                </form>
		            </div>
		        </div>
		    </div>	
		
		<script type="text/html" id="prepayListTemplate">
			{{each prepayList as item i}}
				<tr>
					<td class="typeNameTD">
						<input disabled="disabled" value="{{item.serviceTypeName}}" class="form-control" type="text" >
						<input class="serviceTypeInput" value="{{item.serviceType}}" type="hidden" >
					</td>
					<td class="prepayAmountTD">
						<input disabled="disabled" class="form-control" value="{{item.prepayAmount}}" type="text" >
					</td>
					<td>
						<a href="javascript:void(0);" class="prepayHrefShow" onclick="priceModule.editPrepayItem(this)">编辑</a>
						<a class="prepayHrefEdit hidden" href="javascript:void(0);" onclick="priceModule.cancelEditPrepay(this)">取消</a>
							<zz class="prepayHrefEdit hidden">&#124;</zz>
						<a class="prepayHrefEdit hidden" href="javascript:void(0);" onclick="priceModule.savePrepayItem(this)">保存</a>
					</td>
				</tr>
				
			{{/each}}
		</script>
		
		<!-- 机构列表模板  -->
		<script type="text/html" id="priceListTemplate">
			{{if priceList.length > 0}} {{each priceList as item i}}
			<tr>
				<td>{{item.serviceType | priceFilter : 'DETAIL_TYPE_MAP'}}</td>
				<td>{{item.serviceItem}}</td>
				<td>{{item.price}}</td>
				<td>{{item.serviceUnit | priceFilter : 'SERVICE_UNIT_MAP'}}</td>
				<td>{{item.defaultStatusStr}}</td>
				<td>
					{{if item.longTermInsurance == 2}}
						否
					{{else if item.longTermInsurance == 1}}
						是
					{{/if}}
				
				</td>
				<td>
					<a href="javascript:void(0);" onclick="priceModule.viewPrice('{{item.priceId}}')">查看</a>
					&#124;
					<a href="javascript:void(0);" onclick="priceModule.editDesc('{{item.priceId}}')">服务描述</a>
					&#124;
					<a href="javascript:void(0);" onclick="priceModule.delPrice('{{item.priceId}}')">删除</a>
				</td>
			</tr>
			{{/each}} {{/if}} {{if priceList.length == 0}}
			<tr>
				<td colspan="5" class="text-center">
					暂无数据，点击
					<a href="javascript:void(0);" onclick="priceModule.loadPriceList(true,1);">刷新数据</a>
				</td>
			</tr>
			{{/if}}
		</script>

		<script type="text/html" id="childTypeSelTemplate">
			{{each list as item i}}
			<option value="{{item.id}}">{{item.name}}</option>
			{{/each}}
		</script>
		
		<script type="text/html" id="priceTypeSelTemplate">
			<option value="-1">全部</option>
			{{each list as item i}}
			<option value="{{item.id}}">{{item.name}}</option>
			{{/each}}
		</script>

		<script type="text/javascript" src="../js/plugins/jquery.min.js"></script>
		<script type="text/javascript" src="../js/plugins/bootstrap.min.js"></script>
		<script type="text/javascript" src="../js/app/common/toast.js"></script>
		<script type="text/javascript" src="../js/app/common/httpUtil.js"></script>
		<script type="text/javascript" src="../js/plugins/template.js"></script>
		<script type="text/javascript" src="../js/plugins/pagination/jquery.pagination.js"></script>
		<script type="text/javascript" src="../js/app/common/modalUtil.js"></script>
		<script type="text/javascript" defer async="true" src="https://webapi.amap.com/maps?v=1.3&key=76995f30ba8965c259c624c3a3fa5777"></script>
		<script type="text/javascript" src="../js/plugins/bootbox.js-4.4.0.js"></script>
		<script type="text/javascript" src="../js/plugins/jquery-toast-plugin/jquery.toast.min.js"></script>
		<script type="text/javascript" src="../js/app/companyprice.js"></script>
		<script type="text/javascript" src="../js/app/fun.js"></script>
	</body>

</html>